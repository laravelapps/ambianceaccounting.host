(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{1046:function(e,t,n){"use strict";n.d(t,"b",function(){return p});var o=n(28),r=n(1064),f=n(60),i=n(15),m=n(14),a=n(256),s=n(44),c=n(26),g=n(279),b=n(24),l=n(814),v=n(1010),p=function(o,r,e){return Object.assign({},o,r,e,{onOpen:function(){var e=o.conversation,t=o.part;r.onOpen(e.id,t.id)},onConversationRead:function(){r.onConversationRead(o.conversation.id)},onComposerOrFormInputClick:function(){r.onComposerOrFormInputClick(o.conversation.id)},onReactionSelect:function(e){r.onReactionSelect(o.conversation.id,e)},onClose:function(){var e=o.conversation;r.onClose(e.id)},onSuggestionClicked:function(e){var t=o.conversation,n=Object(v.c)(t);r.onSuggestionClicked(t,e,n)}})};t.a=Object(o.connect)(function(e){var t,n=e.user.isPresent,o=e.app,r=o.name,i=o.userConversationAttachmentsEnabled,a=o.userConversationGifsEnabled,s=e.message.partId,c=Object(g.a)(e)[0],l=m.a.isMobileBrowser(),p=void 0!==s?c.parts.find(function(e){return e.id===s}):(t=c).readAt?Object(b.r)(t):Object(b.b)(t),u=(p||{}).messageType;u=u||"adminReply",p=Object.assign({},p,{messageType:u});var d=Object(f.h)(e),h=e.app.upfrontEmailCollection.upfrontEmailCollectorShowing;return{appName:r,conversation:c,conversationSuggestions:Object(v.a)(e),part:p,userIsPresent:n,isMobile:l,showUploadButton:i,showGifButton:a,shouldShowUpfrontEmailComposer:d,isUpfrontEmailComposerShowing:h}},function(o){return{onOpen:function(e,t){o(Object(a.b)(e,t)),o(Object(a.c)(e,t))},onClose:function(){o(Object(a.a)())},onConversationRead:function(e){o(Object(c.n)(i.a,e))},onComposerOrFormInputClick:function(e){o(Object(a.a)()),o(Object(s.g)(e)),o(Object(c.l)(i.a,e))},onReactionSelect:function(e,t){o(Object(c.k)(i.a,e,t,!1))},onSuggestionClicked:function(e,t,n){o(Object(l.a)(i.a,e,t,!1,n))}}},p)(r.a)},1064:function(e,t,n){"use strict";var o=n(7),r=n.n(o),p=n(1),m=n.n(p),i=n(1069),a=n(1029),f=n(19),c=n(204),l=n(1e3),u=n(1001),d=n(1021),s=n(0),h=n(283),g=Object(s.d)("0%{opacity:0;}70%{opacity:0;transform:translateY(20px);}100%{opacity:1;transform:translateY(0);}"),b=Object(s.c)("div",{target:"enffyqv0"})("position:relative;box-sizing:border-box;padding:17px 20px;margin-top:5px;width:100%;height:",Object(s.f)("chatComposerHeight"),"px;background-color:",Object(s.f)("inputBackground"),";border-radius:",Object(s.f)("notificationBorderRadius"),"px;border:none;font-size:14px;cursor:pointer;color:",Object(s.f)("inputPlaceholder"),";box-shadow:0 1px 6px rgba(0,0,0,0.06),0 2px 32px rgba(0,0,0,0.16);animation:",g," 750ms ease;",function(e){var t=e.theme,n=e.useBorderlessAvatarOffset;return t.isLeftAlign&&n&&Object(s.b)("margin-left:",-t.borderlessAvatarOffsetWidth,"px;width:calc(100% + ",t.borderlessAvatarOffsetWidth,"px);")}),v=Object(s.c)("span",{target:"enffyqv1"})({name:"1rju6wc",styles:"display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:140px;line-height:18px;"}),y=Object(s.c)("div",{target:"enffyqv2"})({name:"1cp2t9f",styles:"position:absolute;top:0;right:18px;"}),O=Object(s.c)("span",{target:"enffyqv3"})({name:"pctu5d",styles:"position:relative;float:left;display:inline-block;cursor:pointer;opacity:0.8;transition:opacity 200ms ease;height:51px;margin-top:2px;&:hover{opacity:1;}&:before{position:absolute;top:20px;background-position:center;}svg{position:absolute;top:18px;}"},";width:",18,"px;padding-left:",9,"px;padding-right:",9,"px;svg{height:18px;width:18px;}svg path{fill:",Object(s.f)("grey"),";}&:before{top:18px;}"),C=Object(s.c)(h.a,{target:"enffyqv4"})({name:"g6u7x8",styles:"right:18px;"}),w=Object(s.c)(h.c,{target:"enffyqv5"})({name:"1yphczb",styles:"&:before{top:18px;}"}),S=Object(s.c)(h.j,{target:"enffyqv6"})({name:"1yphczb",styles:"&:before{top:18px;}"});var k=function(s){var e,t;function n(){for(var t,e,n,o,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=s.call.apply(s,[this].concat(i))||this,e=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),o=function(e){e.stopPropagation(),t.props.onClose()},(n="handleDismissClick")in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,t}t=s,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.renderComposer=function(){var e=this.props.part.author.firstName;return m.a.createElement(b,{useBorderlessAvatarOffset:!0},m.a.createElement(v,{className:"chat-composer-placeholder"},Object(f.c)("reply_to_name",{name:e})),m.a.createElement(C,null,m.a.createElement(w,null,m.a.createElement(u.a,null)),m.a.createElement(S,null,m.a.createElement(l.a,null))))},o.renderAttributeCollectorCard=function(){var e=this.props,t=e.part,n=e.frameWindow;return m.a.createElement(a.a,{part:t,hasAvatar:!1,isBorderless:!0,isReplyType:!0,frameWindow:n,key:Object(c.a)(JSON.stringify(t))})},o.renderDismissButton=function(){return m.a.createElement(d.b,{onClick:this.handleDismissClick,"aria-label":Object(f.c)("clear")},m.a.createElement("span",null,Object(f.c)("clear")))},o.renderReplyType=function(){switch(this.props.part.replyType){case"attribute_collector":return this.renderAttributeCollectorCard();default:return this.renderComposer()}},o.renderChatCardGroup=function(){var e=this.props,t=e.appName,n=e.part,o=e.frameWindow;return m.a.createElement(i.a,{appName:t,part:n,isBorderless:!0,isMobile:!0,frameWindow:o})},o.render=function(){var e=this.props,t=e.composerState,n=e.onComposerOrFormInputClick;return m.a.createElement(d.a,{className:"intercom-chat",onClick:n},this.renderChatCardGroup(),this.renderDismissButton(),t.visible&&this.renderReplyType())},n}(p.Component),j=n(431),E=n(275),x=n(9),R={name:"145vpms",styles:"left:0;right:auto;"},_=Object(s.c)(E.a,{target:"e1g9h0if0"})("z-index:",Object(x.j)(),";position:fixed;max-width:360px;width:calc(100% - 25px);right:0;",function(e){var t=e.height;return Object(s.b)("bottom:0;height:",t+20,"px;")}," ",function(e){return e.theme.isLeftAlign&&R}," ",function(e){var t=e.theme,n=e.height;return t.isLauncherEnabled&&Object(s.b)("height:",n+t.launcherOffsetBottomPadding+20,"px;")}),T=n(828);function I(e){var t=e.appName,n=e.part,o=e.onClose,r=e.onComposerOrFormInputClick,i=e.composerState,a=Object(p.useState)(0),s=a[0],c=a[1],l=function(e){var t=e.height;return c(t)};return m.a.createElement(_,{frameName:"intercom-chat-frame",height:s,shouldLoadStylesheet:!0,title:"Intercom live chat "+Object(f.c)("message")},function(e){return m.a.createElement(m.a.Fragment,null,m.a.createElement(j.a,{onChange:l},m.a.createElement(k,{appName:t,part:n,onClose:o,composerState:i,onComposerOrFormInputClick:r,frameWindow:e})),m.a.createElement(T.a,{appWindow:e}))})}var P=n(996),N=n(989),B=n(992),M=n(1003),A=n(16),F=n(1050),H=n(1032),V=n(4),q=n(343);function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(r){var e,t;function n(){for(var o,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return z(D(o=r.call.apply(r,[this].concat(t))||this),"state",{isFooterVisible:!0,isScrolled:!1}),z(D(o),"handleScroll",function(e){var t=o.state.isFooterVisible,n=Object(A.l)(e.target);o.setState({isFooterVisible:t||n<=o.getFooterHeight(),isScrolled:0<e.target.scrollTop})}),z(D(o),"handleScrollable",function(e){var t=e.scrollHeight-e.clientHeight,n=o.state.isFooterVisible||void 0===o.props.reactionsReply||t<=o.getReactionsVisibilityThreshold();o.setState({isFooterVisible:n})}),z(D(o),"addClickedComposerMetric",function(){var e=o.props,t=e.message.id,n=e.conversationId;Object(V.e)("clicked","composer","in_app","from_full",{message_type:"note",message_id:t,conversation_id:n})}),z(D(o),"handleComposerClick",function(){o.addClickedComposerMetric(),o.props.onComposerClick()}),o}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.getReactionsVisibilityThreshold=function(){return this.getFooterHeight()+20},o.getFooterHeight=function(){return this.footer?this.footer.clientHeight:0},o.renderFooter=function(){var e=this.props,t=e.showUploadButton,n=e.showGifButton;return e.showReplyToButton?m.a.createElement(H.a,{onClick:this.handleComposerClick}):m.a.createElement(q.c,{className:"intercom-note-composer",onClick:this.handleComposerClick,"aria-label":Object(f.c)("open_conversation_and_reply")},m.a.createElement(h.f,null,Object(f.c)("reply_to_conversation")),m.a.createElement(h.a,null,n?m.a.createElement(h.e,null,m.a.createElement(F.a,null)):null,m.a.createElement(h.c,null,m.a.createElement(u.a,null)),t?m.a.createElement(h.j,null,m.a.createElement(l.a,null)):null))},o.renderReactionPicker=function(){var e=this.props,t=e.reactionsReply,n=e.onReactionSelect;return m.a.createElement(M.a,W({},t,{onReactionSelect:n}))},o.render=function(){var t=this,e=this.props,n=e.appName,o=e.message,r=e.reactionsReply,i=e.onClose,a=e.frameWindow,s=e.showReplyToButton,c=this.state,l=c.isScrolled,p=c.isFooterVisible,u=o.author,d=o.lastActiveAt,h=o.body;return m.a.createElement(q.e,{className:"intercom-note",isScrolled:l},m.a.createElement(B.b,{appName:n,isReplyStyle:!1,author:u,lastActiveAt:d},m.a.createElement(q.b,{className:"intercom-anchor",onClick:i,"aria-label":Object(f.c)("close")},"Â "),m.a.createElement(q.a,{showReplyToButton:s},m.a.createElement(P.a,{onScroll:this.handleScroll,onScrollable:this.handleScrollable},m.a.createElement(N.a,{blocks:h,zoomable:!0,frameWindow:a}))),m.a.createElement(q.d,{ref:function(e){return t.footer=e},isFooterVisible:p,showReplyToButton:s},r?this.renderReactionPicker():this.renderFooter())))},n}(p.Component);L.propTypes={appName:r.a.string.isRequired,message:r.a.shape({author:r.a.object.isRequired,body:r.a.array.isRequired,lastActiveAt:r.a.instanceOf(Date)}).isRequired,conversationId:r.a.string,reactionsReply:r.a.shape({reactionIndex:r.a.number,reactionSet:r.a.array.isRequired}),onClose:r.a.func,onComposerClick:r.a.func,onReactionSelect:r.a.func,frameWindow:r.a.object,showUploadButton:r.a.bool,showGifButton:r.a.bool,showReplyToButton:r.a.bool},L.defaultProps={showUploadButton:!0,showGifButton:!0};var U={name:"fnfiys",styles:"right:0;left:0;margin:0 auto;"},G=Object(s.c)(E.a,{target:"e1o2sc8n0"})("position:fixed;bottom:",Object(x.h)(),"px;right:",Object(s.f)("horizontalPadding"),"px;width:342px;z-index:",Object(x.j)(1),";box-shadow:0 3px 32px 0 rgba(0,0,0,0.14);",function(e){var t=e.theme;return t.isLeftAlignment&&Object(s.b)("left:",t.horizontalPadding,"px;right:auto;")}," ",function(e){return e.theme.isMobileSize&&U});function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K=function(r){var e,t;function n(){for(var n,e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return X(Y(n=r.call.apply(r,[this].concat(t))||this),"state",{height:0}),X(Y(n),"handleHeightChange",function(e){var t=e.height;n.setState({height:t})}),n}return t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,n.prototype.render=function(){var t=this,e=this.props,n=e.conversationId,o=e.appName,r=e.message,i=e.reactionsReply,a=e.showUploadButton,s=e.showGifButton,c=e.onComposerClick,l=e.onReactionSelect,p=e.showReplyToButton,u=e.onClose,d=this.state.height;return m.a.createElement(G,{style:{height:d},frameName:"intercom-note-frame",title:"Intercom live chat "+Object(f.c)("message"),shouldLoadStylesheet:!0},function(e){return m.a.createElement("span",null,m.a.createElement(j.a,{id:"note-frame",key:"note-frame",onChange:t.handleHeightChange},m.a.createElement(L,{frameWindow:e,conversationId:n,appName:o,message:r,reactionsReply:i,showUploadButton:a,showGifButton:s,onClose:u,onComposerClick:c,onReactionSelect:l,showReplyToButton:p})),m.a.createElement(T.a,{appWindow:e}))})},n}(p.Component);function J(){return m.a.createElement("svg",{focusable:"false","aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 16 16",className:"intercom-chat-bubble-icon"},m.a.createElement("path",{d:"M7.357 1.071c.34-.035.679-.071.982-.071 3 0 6.304 2.054 6.625 5.59.018.214.036.428.036.642 0 3.054-2.518 6.179-6.357 6.697A6.958 6.958 0 0 1 7.75 14c-.357 0-.357 0-.75-.071-.91 1.178-1.982 1.482-3.16 1.696a3.184 3.184 0 0 1-.536.054c-.304 0-.733-.143-.536-.34.928-.785 1.036-1.303 1.036-2.214 0-.09 0-.179-.018-.268-1.625-1.107-2.536-2.571-2.75-4.446A7.753 7.753 0 0 1 1 7.768C1 4.714 3.518 1.589 7.357 1.07z"}))}var Q=n(1006);function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te=function(r){var e,t;function n(){for(var o,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ee(Z(o=r.call.apply(r,[this].concat(t))||this),"node",void 0),ee(Z(o),"state",{isFooterVisible:!0,isScrolled:!1}),ee(Z(o),"footer",void 0),ee(Z(o),"handleScroll",function(e){var t=o.state.isFooterVisible,n=Object(A.l)(e.target);o.setState({isFooterVisible:t||n<=o.getFooterHeight(),isScrolled:0<e.target.scrollTop})}),ee(Z(o),"handleScrollable",function(e){var t=e.scrollHeight-e.clientHeight,n=o.state.isFooterVisible||void 0===o.props.reactionsReply||t<=o.getReactionsVisibilityThreshold();o.setState({isFooterVisible:n})}),ee(Z(o),"isReplyDisabled",function(){return"disabled"===o.props.message.replyType}),ee(Z(o),"addClickedComposerMetric",function(){var e=o.props,t=e.message.id,n=e.conversationId;Object(V.e)("clicked","composer","in_app","from_full",{message_type:"pointer",message_id:t,conversation_id:n})}),ee(Z(o),"handleComposerClick",function(){o.addClickedComposerMetric(),o.props.onComposerClick()}),o}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.getReactionsVisibilityThreshold=function(){return this.getFooterHeight()+20},o.getFooterHeight=function(){return this.footer?this.footer.clientHeight:0},o.renderFooter=function(e){var t=this;return this.isReplyDisabled()?null:m.a.createElement(Q.d,{ref:function(e){return t.footer=e},isFooterVisible:this.state.isFooterVisible},e?this.renderReactionPicker():this.renderChatComposer())},o.renderChatComposer=function(){return m.a.createElement(Q.c,{className:"intercom-pointer-composer",onClick:this.handleComposerClick},m.a.createElement("span",null,m.a.createElement(J,null)),m.a.createElement(h.f,null,Object(f.c)("start_a_conversation")))},o.renderReactionPicker=function(){var e=this.props,t=e.reactionsReply,n=e.onReactionSelect;return m.a.createElement(M.a,$({},t,{onReactionSelect:n}))},o.render=function(){var t=this,e=this.props,n=e.appName,o=e.message,r=e.reactionsReply,i=e.onClose,a=e.frameWindow,s=o.author,c=o.lastActiveAt,l=o.body;return m.a.createElement(Q.e,{isInbox:!1,isScrolled:this.state.isScrolled,ref:function(e){return t.node=e},className:"intercom-pointer"},m.a.createElement(B.b,{appName:n,isReplyStyle:!1,author:s,lastActiveAt:c},m.a.createElement(Q.b,{onClick:i,"aria-label":Object(f.c)("close")},"Â "),m.a.createElement(Q.a,{intercomRepliesDisabled:this.isReplyDisabled()},m.a.createElement(P.a,{onScroll:this.handleScroll,onScrollable:this.handleScrollable},m.a.createElement(N.a,{blocks:l,zoomable:!0,frameWindow:a}))),this.renderFooter(r)))},n}(p.Component),ne=n(1067),oe=Object(s.c)(E.a,{target:"e1lu8yo70"})("z-index:",Object(x.j)(1),";border-radius:5px;box-shadow:0 3px 32px 0 rgba(0,0,0,0.14);border:1px solid rgba(0,0,0,0.1);");function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae=function(r){var e,t;function n(){for(var o,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ie(re(o=r.call.apply(r,[this].concat(t))||this),"state",{width:0,height:0}),ie(re(o),"handleDimensionFrameSize",function(e){var t=e.height,n=e.width;o.setState({width:n,height:t})}),o}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.frameStyles=function(){var e=this.state;return{width:e.width,height:e.height,opacity:1}},o.render=function(){var e=this,t=this.props,n=t.appName,o=t.appWindow,r=t.message,i=t.conversationId,a=t.onClose,s=t.reactionsReply,c=t.onComposerClick,l=t.onReactionSelect;return m.a.createElement(ne.a,{appWindow:o,targetSelector:r.pointerSelector,childDimensions:this.frameStyles()},m.a.createElement(oe,{style:this.frameStyles(),frameName:"intercom-pointer-frame",title:"Intercom live chat "+Object(f.c)("pointer"),shouldLoadStylesheet:!0},function(){return m.a.createElement(j.a,{id:"pointer-frame",key:"pointer-frame",onChange:e.handleDimensionFrameSize},m.a.createElement(te,{appName:n,message:r,conversationId:i,reactionsReply:s,frameWindow:o,onComposerClick:c,onReactionSelect:l,onClose:a}))}))},n}(p.PureComponent),se=n(1053),ce=n(81),le=n(1066),pe=n(186),ue=n.n(pe),de=n(187),he=n.n(de),fe={name:"siiwv4",styles:"&:hover .story-dismiss-button{opacity:1;}"},me=Object(s.c)("div",{target:"e18fd67o0"})("z-index:",Object(x.j)(1),";font-size:13px;font-family:",Object(s.f)("fontSansSerif"),";color:",Object(s.f)("bodyText"),";position:relative;",function(e){var t=e.theme;return e.standalone&&Object(s.b)("position:fixed;bottom:",t.verticalPadding,"px;right:",t.horizontalPadding,"px;")}," ",function(e){return e.isVideoLoaded&&fe}," ",function(e){var t=e.theme;return t.isLauncherEnabled&&Object(s.b)("bottom:",t.verticalPadding+t.launcherOffsetBottomPadding,"px;")}),ge={name:"1c9b7w0",styles:"width:240px;height:180px;margin-left:10px;"},be={name:"dxx3wj",styles:"margin-top:42px;"},ve={name:"ajzub1",styles:"margin-top:54px;"},ye=Object(s.c)("div",{target:"e18fd67o1"})("position:relative;overflow:hidden;box-shadow:0px 2px 16px rgba(0,0,0,0.14),0px 1px 6px rgba(0,0,0,0.06);border-radius:5px;transition:transform 150ms ease,width 200ms ease,height 200ms ease,margin 200ms;transform-origin:bottom right;width:340px;height:255px;",function(e){return e.standalone&&ve}," ",function(e){var t=e.standalone,n=e.isExpanded;return t&&n&&be}," ",function(e){return e.theme.isMobileSize&&ge}),Oe=Object(s.c)("div",{target:"e18fd67o2"})("position:absolute;top:0;right:0;display:block;opacity:0;transition:opacity 150ms ease;span{display:block;background-color:#5d6c80;opacity:0.8;color:",Object(s.f)("white"),";font-size:13px;height:32px;line-height:32px;padding:0 16px 0 16px;border-radius:16px;cursor:pointer;background-position:center;",Object(x.b)(ue.a,he.a,"8px","8px"),";&:hover{opacity:1;}}"),Ce=Object(s.c)("div",{target:"e18fd67o3"})("position:absolute;width:100%;z-index:",Object(x.j)(1),";top:0;left:0;right:0;bottom:0;cursor:pointer;"),we=Object(s.c)("div",{target:"e18fd67o4"})({name:"maq7xh",styles:".chat-composer{margin-top:10px;}&.video-composer-enter{.chat-composer{display:block;height:0;opacity:0;overflow:hidden;padding-top:0;padding-bottom:0;margin-top:0;}.composer-placeholder,.composer-buttons{opacity:0;transition:opacity 200ms ease;transition-delay:200ms;}}&.video-composer-enter-active{.chat-composer{opacity:1;height:52px;padding-top:17px;padding-bottom:17px;transition-property:height,opacity,padding,margin;transition-duration:200ms;transition-timing-function:ease;margin-top:10px;}.composer-placeholder,.composer-buttons{opacity:1;}}"}),Se=n(1030);function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ee=function(r){var e,t;function n(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return je(ke(e=r.call.apply(r,[this].concat(n))||this),"video",void 0),je(ke(e),"state",{isExpanded:!1,isVideoLoaded:!1}),je(ke(e),"handleOverlayClick",function(){e.state.isVideoLoaded&&e.setState({isExpanded:!0})}),je(ke(e),"handleVideoLoaded",function(){e.setState({isVideoLoaded:!0})}),e}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.renderDismissButton=function(){return this.props.standalone?m.a.createElement(Oe,{className:"story-dismiss-button",onClick:this.props.onClose},m.a.createElement("span",null)):null},o.renderOverlay=function(){return this.state.isExpanded?null:m.a.createElement(Ce,{className:"story-overlay",onClick:this.handleOverlayClick})},o.renderComposer=function(){var e=this.props,t=e.part,n=e.onComposerOrFormInputClick,o=t.author.firstName;return m.a.createElement(ce.CSSTransition,{classNames:"video-composer",timeout:{enter:400,exit:400}},m.a.createElement(we,null,m.a.createElement(b,{className:"chat-composer",onClick:n,"aria-label":Object(f.c)("open_conversation_and_reply"),useBorderlessAvatarOffset:!1},m.a.createElement(v,{className:"composer-placeholder"},Object(f.c)("reply_to_name",{name:o})),m.a.createElement(y,{className:"composer-buttons"},m.a.createElement(O,null,m.a.createElement(u.a,null)),m.a.createElement(O,null,m.a.createElement(l.a,null))))))},o.renderSuggestions=function(){var e=this.props,t=e.onSuggestionClicked,n=e.conversationSuggestions,o=e.conversation;return m.a.createElement(Se.a,{conversation:o,conversationSuggestions:n,onClick:t})},o.renderResponseArea=function(){return this.state.isExpanded&&this.props.showResponseArea?this.props.conversationSuggestions?this.renderSuggestions():this.renderComposer():null},o.render=function(){var e=this.props,t=e.part.body,n=e.autoPlay,o=e.standalone,r=this.state,i=r.isExpanded,a=r.isVideoLoaded,s=t[0],c=s.url,l=s.captions,p=s.thumbnailUrl;return m.a.createElement(me,{standalone:o,isVideoLoaded:a},this.renderDismissButton(),m.a.createElement(ye,{standalone:o,isExpanded:i},this.renderOverlay(),m.a.createElement(le.a,{srcUrl:c,autoPlay:n,onVideoLoaded:this.handleVideoLoaded,captions:l,thumbnailUrl:p})),m.a.createElement(ce.TransitionGroup,null,this.renderResponseArea()))},n}(p.Component);je(Ee,"defaultProps",{standalone:!1,onClose:function(){},showResponseArea:!0,autoPlay:!1});var xe=Object(s.c)(E.a,{target:"elkwj510"})("z-index:",Object(x.j)(),";position:fixed;right:0;bottom:0;width:100vw;height:100vh;");function Re(e){var t=e.conversation,n=e.standalone,o=e.part,r=e.onClose,i=e.onComposerOrFormInputClick,a=e.conversationSuggestions,s=e.onSuggestionClicked;return m.a.createElement(xe,{frameName:"intercom-story-frame",shouldLoadStylesheet:!0},function(e){return m.a.createElement(m.a.Fragment,null,m.a.createElement(Ee,{conversation:t,standalone:n,part:o,onClose:r,onComposerOrFormInputClick:i,conversationSuggestions:a,onSuggestionClicked:s}),m.a.createElement(T.a,{appWindow:e}))})}var _e=n(28),Te=n(15),Ie=n(1063),Pe=n(1065),Ne=n(24),Be=Object(s.c)("div",{target:"e19nv0ic0"})({name:"1bsawdq",styles:"padding-top:0;padding-left:45px;"});function Me(){return(Me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function Ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var He=function(r){var e,t;function n(){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return Fe(Ae(t=r.call.apply(r,[this].concat(n))||this),"ref",void 0),Fe(Ae(t),"setRef",function(e){t.ref=e}),t}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.componentDidMount=function(){Object(Ne.o)(this.props.conversation)&&this.handleShow()},o.componentDidUpdate=function(e){!Object(Ne.o)(e.conversation)&&Object(Ne.o)(this.props.conversation)?this.handleShow():Object(Ne.o)(e.conversation)&&!Object(Ne.o)(this.props.conversation)&&this.handleHide()},o.handleShow=function(){this.props.handleComposerResize(this.getHeight())},o.handleHide=function(){this.props.onHide()},o.getHeight=function(){return this.ref?this.ref.clientHeight:0},o.render=function(){var e=this.props,t=e.conversation,n=e.handleComposerResize,o=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,["conversation","handleComposerResize"]);return Object(Ne.o)(t)?m.a.createElement(Be,{ref:this.setRef},m.a.createElement(Pe.a,Me({isBorderless:!0,conversation:t,onHeightChange:n},o))):null},n}(p.PureComponent),Ve=n(1057),qe=n(260),We={name:"1xzanuf",styles:"margin-right:0;"},De={name:"1v8x7dw",styles:"overflow:auto;"},ze=Object(s.c)("div",{target:"e1my0o560"})("overflow-anchor:none;max-height:100%;padding-top:10px;padding-right:10px;margin-right:-10px;",function(e){return e.enabledScroll&&De}," ",function(e){var t=e.enabledScroll,n=e.visibleScrollbars;return t&&n&&We}),Le=Object(s.c)("div",{target:"e1my0o561"})({name:"l57rop",styles:"padding-bottom:10px;"});function Ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ye=function(r){var e,t;function n(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Ge(Ue(e=r.call.apply(r,[this].concat(n))||this),"isPartBeingAddedTimeout",void 0),Ge(Ue(e),"borderlessBodyNode",void 0),Ge(Ue(e),"visibleScrollbarsInOs",0!==Object(qe.a)()),Ge(Ue(e),"state",{isPartBeingAdded:!1,bottomScrollOffset:0,frameOffsetTop:e.props.frameNode.offsetTop,adminWasTyping:!1}),Ge(Ue(e),"recalculateOffsets",function(){e.setState({frameOffsetTop:e.props.frameNode.offsetTop},function(){return Object(A.z)(e.borderlessBodyNode)})}),Ge(Ue(e),"handleScroll",function(){e.state.isPartBeingAdded||e.setState({bottomScrollOffset:Object(A.f)(e.borderlessBodyNode)})}),e}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.componentDidMount=function(){Object(A.c)(window.parent,"resize",this.recalculateOffsets)},o.componentDidUpdate=function(e){var t=this,n=this.state.frameOffsetTop,o=this.props,r=o.conversation,i=o.frameNode,a=e.conversation,s=r.parts.length!==a.parts.length,c=Object(Ve.h)(r);(s||c&&!this.state.adminWasTyping)&&(Object(A.z)(this.borderlessBodyNode),this.setState({isPartBeingAdded:!0,bottomScrollOffset:0}),clearTimeout(this.isPartBeingAddedTimeout),this.isPartBeingAddedTimeout=setTimeout(function(){t.setState({isPartBeingAdded:!1}),Object(A.z)(t.borderlessBodyNode)},300)),i.offsetTop!==n&&this.setState({frameOffsetTop:i.offsetTop},function(){t.setState({bottomScrollOffset:Object(A.f)(t.borderlessBodyNode)})}),c!==this.state.adminWasTyping&&this.setState({adminWasTyping:c})},o.componentWillUnmount=function(){clearTimeout(this.isPartBeingAddedTimeout),Object(A.y)(window.parent,"resize",this.recalculateOffsets)},o.getStyle=function(){var e=this.props,t=e.borderlessNode,n=e.composerHeight,o=t&&t.clientHeight,r=this.state.frameOffsetTop;if(o&&!r){var i=o/100,a=100-10/i,s="linear-gradient(to bottom, rgb(0, 0, 0), rgb(0, 0, 0) "+(100-76/i)+"%, rgba(0, 0, 0, "+Math.max(1-this.state.bottomScrollOffset/100*5,0)+") "+a+"%)";return{maxHeight:o-n-et+"px",WebkitMaskImage:s,MaskImage:s}}},o.render=function(){var t=this;return m.a.createElement(ze,{style:this.getStyle(),ref:function(e){return t.borderlessBodyNode=e},onScroll:this.handleScroll,enabledScroll:0===this.state.frameOffsetTop,visibleScrollbars:this.visibleScrollbarsInOs},this.props.children())},n}(p.Component),Xe=n(1070),Ke=n(432),Je=n(439),Qe=n(194);function $e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var et=20,tt=function(r){var e,t;function n(){for(var o,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ze($e(o=r.call.apply(r,[this].concat(t))||this),"state",{isEmojiPickerOpen:!1,isGifPickerOpen:!1,headerHeight:50,partsHeight:0,suggestionsHeight:0,composerHeight:0,replyToButtonHeight:0}),Ze($e(o),"handlePartsHeightChange",function(e){o.setState({partsHeight:e},o.handleHeightChange)}),Ze($e(o),"setSuggestionsHeight",function(e){o.setState({suggestionsHeight:e},o.handleHeightChange)}),Ze($e(o),"handleQuickRepliesHide",function(){o.setState({suggestionsHeight:0},o.handleHeightChange)}),Ze($e(o),"handleComposerShow",function(e){o.setState({composerHeight:e},o.handleHeightChange)}),Ze($e(o),"handleComposerHide",function(){o.setState({composerHeight:0},o.handleHeightChange)}),Ze($e(o),"handleReplyToButtonShow",function(e){o.setState({replyToButtonHeight:e},o.handleHeightChange)}),Ze($e(o),"handleClick",function(){var e=o.state,t=e.isEmojiPickerOpen,n=e.isGifPickerOpen;t?o.setState({isEmojiPickerOpen:!1}):n&&o.setState({isGifPickerOpen:!1})}),Ze($e(o),"handleDismissClick",function(e){e.stopPropagation(),o.addCloseMetric(),o.props.onClose();var t=Object(Je.a)();t&&t.focus()}),Ze($e(o),"handleEmojiPickerToggle",function(){var e=!o.state.isEmojiPickerOpen;o.setState({isEmojiPickerOpen:e}),o.props.onPopoverToggle(e)}),Ze($e(o),"handleGifPickerToggle",function(){var e=!o.state.isGifPickerOpen;o.setState({isGifPickerOpen:e}),o.props.onPopoverToggle(e)}),Ze($e(o),"handleViewMoreClick",function(){o.addViewMoreMetric(),o.props.onViewMore()}),Ze($e(o),"handleHeightChange",function(){o.props.onHeightChange(o.getHeight())}),o}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.componentDidMount=function(){this.props.onOpen(),this.focusTrap=new Ke.a({document:this.props.frameWindow.document})},o.componentDidUpdate=function(e){var t=this.props.conversation;"all"===t.fetchState&&Object(Ne.a)(t)>Object(Ne.a)(e.conversation)&&this.addReplyMetric(t)},o.componentWillUnmount=function(){this.focusTrap&&this.focusTrap.restore()},o.getHeight=function(){var e=this.state;return e.headerHeight+e.partsHeight+e.composerHeight+e.suggestionsHeight+e.replyToButtonHeight+et},o.getStyle=function(){return{height:this.getHeight()}},o.hasComposer=function(){var e=this.props.conversation,t=e.parts,n=e.composerState;return"attribute_collector"===t[0].replyType||n.visible},o.shouldRenderHeader=function(){var e=this.state,t=e.isEmojiPickerOpen,n=e.isGifPickerOpen;return!(t||n)},o.addViewMoreMetric=function(){Object(V.e)("clicked","viewmore_button","borderless","",{conversation_id:this.props.conversation.id})},o.addReplyMetric=function(){var e=this.props.conversation,t=Object(Ne.d)(e);Object(V.e)("received","reply","borderless","",{conversation_id:e.id,part_id:t.id,part_type:"adminReply",reply_type:t.replyType})},o.addCloseMetric=function(){Object(V.e)("closed","borderless","borderless","from_close_button",{conversation_id:this.props.conversation.id})},o.renderHeader=function(){return m.a.createElement(Qe.d,null,m.a.createElement(Qe.b,null,this.props.hasHistory?this.renderViewMoreButton():null,m.a.createElement(Qe.e,{onClick:this.handleDismissClick,"aria-label":Object(f.c)("dismiss")},m.a.createElement("span",null))))},o.renderViewMoreButton=function(){return m.a.createElement(Qe.f,{onClick:this.handleViewMoreClick},m.a.createElement("span",null,Object(f.c)("view_more")))},o.renderParts=function(){var e=this.props,t=e.appName,n=e.userRole,o=e.conversation,r=e.onArticleCardClick,i=e.onReactionSelect,a=e.onRetry,s=e.frameWindow,c=this.state,l=c.isEmojiPickerOpen,p=c.isGifPickerOpen;return m.a.createElement(Ie.a,{isBorderless:!0,isFaded:l||p,maxHeight:0,appName:t,userRole:n,conversation:o,frameWindow:s,onArticleCardClick:r,onHeightChange:this.handlePartsHeightChange,onReactionSelect:i,onRetry:a})},o.renderSuggestions=function(){var e=this.props,t=e.onSuggestionClicked,n=e.conversationSuggestions,o=e.conversation;return m.a.createElement(j.a,{onHeightChange:this.setSuggestionsHeight},m.a.createElement("div",null,m.a.createElement(Se.a,{conversation:o,conversationSuggestions:n,onClick:t,isBorderless:!0})))},o.renderFooter=function(){var e=this.state,t=e.isEmojiPickerOpen,n=e.isGifPickerOpen,o=this.props,r=o.showReplyToButton,i=o.onComposerClick,a=o.conversation,s=o.frameWindow;return r&&Object(Ne.o)(this.props.conversation)?m.a.createElement(H.a,{isBorderless:!0,onShow:this.handleReplyToButtonShow,onClick:i}):m.a.createElement(He,{conversation:a,showEmojiPicker:t,showGifPicker:n,handleComposerResize:this.handleComposerShow,onHide:this.handleComposerHide,onEmojiPickerToggle:this.handleEmojiPickerToggle,onGifPickerToggle:this.handleGifPickerToggle,frameWindow:s})},o.render=function(){var t=this,e=this.props,n=e.conversation,o=e.frameNode,r=this.state.composerHeight;return m.a.createElement(Qe.c,{className:"intercom-borderless",style:this.getStyle(),onClick:this.handleClick,tabIndex:"-1",role:"region",ref:function(e){return t.borderlessNode=e},hasComposer:this.hasComposer()},this.shouldRenderHeader()?this.renderHeader():null,m.a.createElement(Qe.a,null,m.a.createElement(Ye,{conversation:n,composerHeight:r,borderlessNode:this.borderlessNode,frameNode:o},function(){return m.a.createElement(Le,null,t.renderParts(),t.renderSuggestions())}),this.renderFooter()),m.a.createElement(T.a,{appWindow:this.props.frameWindow}))},n}(p.Component);tt.propTypes={conversation:r.a.shape({id:r.a.string.isRequired,fetchState:r.a.oneOf(["summary","partial","all"]),parts:r.a.arrayOf(r.a.shape({id:r.a.string,replyType:r.a.oneOf(["text","attribute_collector"])})).isRequired,composerState:r.a.shape({visible:r.a.bool.isRequired}).isRequired}),conversationSuggestions:r.a.shape({prompt:r.a.any,suggestions:r.a.arrayOf(r.a.shape({uuid:r.a.string.isRequired,text:r.a.string.isRequired,preAction:r.a.string}))}),onSuggestionClicked:r.a.func,appName:r.a.string.isRequired,userRole:r.a.string.isRequired,hasHistory:r.a.bool,alignment:r.a.string,onOpen:r.a.func.isRequired,onHeightChange:r.a.func.isRequired,onPopoverToggle:r.a.func.isRequired,onArticleCardClick:r.a.func.isRequired,onReactionSelect:r.a.func.isRequired,onRetry:r.a.func.isRequired,onViewMore:r.a.func.isRequired,onClose:r.a.func.isRequired,onComposerClick:r.a.func.isRequired,frameWindow:r.a.any.isRequired,showReplyToButton:r.a.bool,part:r.a.object,frameNode:r.a.object.isRequired};var nt=Object(Xe.a)(tt),ot=n(44),rt=n(1026);var it=n(822),at=n(26),st=Object(_e.connect)(function(e,t){var n=e.app.name,o=e.user.role,r=t.part,i=t.conversation,a=Object(it.a)(e).alignment,s=i.parts.filter(function(e){return e.createdAt>=r.createdAt}),c=s[0].messageType;c=c||"adminReply",s[0]=Object.assign({},s[0],{messageType:c});var l=s.length<i.parts.length;return{appName:n,userRole:o,conversation:Object.assign({},i,{parts:s}),hasHistory:l,alignment:a}},function(n){return{onOpen:function(e){n({type:"OPEN_BORDERLESS_CONVERSATION",conversationId:e})},onRetry:function(e,t){n(Object(at.p)(Te.a,e,t))},onReactionSelect:function(e,t){n(Object(at.k)(Te.a,e,t,!1))},onArticleCardClick:function(e,t){return n(Object(rt.c)(Te.a,e,t))},onViewMore:function(e,t){n(Object(ot.f)(e,"viewmore_borderless",t))}}},function(e,t,n){var o=e.conversation,r=o.id,i=o.lastParticipatingAdmin,a={onOpen:function(){t.onOpen(r)},onReactionSelect:function(e){t.onReactionSelect(r,e)},onRetry:function(e){t.onRetry(o,e)},onViewMore:function(){t.onViewMore(r,i)},conversation:o};return Object.assign({},e,t,n,a)})(nt),ct={name:"n7pinj",styles:"min-height:350px;"},lt=Object(s.c)(E.a,{target:"eqgwjwo0"})("z-index:",Object(x.j)(),";position:fixed;width:360px;",function(e){var t=e.theme;return Object(s.b)("bottom:",t.verticalPadding-t.borderlessIframePadding,"px;right:",t.horizontalPadding-t.borderlessIframePadding,"px;max-height:calc(100% - ",t.verticalPadding-t.borderlessIframePadding,"px);")}," ",function(e){return e.isPopoverOpen&&ct}," ",function(e){var t=e.theme;return t.isLeftAlign&&Object(s.b)("left:",t.borderlessIframePadding+t.horizontalPadding-t.borderlessIframePaddingLeft+t.borderlessAvatarOffsetWidth,"px;right:auto;")}," ",function(e){var t=e.theme;return t.isLauncherEnabled&&Object(s.b)("bottom:",t.verticalPadding+t.launcherOffsetBottomPadding-t.borderlessIframePadding,"px;max-height:calc( 100% - ",t.verticalPadding+t.launcherOffsetBottomPadding-t.borderlessIframePadding,"px );")});function pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dt=function(r){var e,t;function n(){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return ut(pt(t=r.call.apply(r,[this].concat(n))||this),"state",{height:0,isPopoverOpen:!1}),ut(pt(t),"handleHeightChange",function(e){t.setState({height:e})}),ut(pt(t),"handlePopoverToggle",function(e){t.setState({isPopoverOpen:e})}),t}return t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,n.prototype.render=function(){var n=this,e=this.props,o=e.conversation,r=e.part,i=e.onClose,a=e.onComposerClick,s=e.showReplyToButton,c=e.conversationSuggestions,l=e.onSuggestionClicked,t=this.state,p=t.isPopoverOpen,u=t.height;return m.a.createElement(lt,{style:{height:u},className:"intercom-borderless-frame",frameName:"intercom-borderless-frame",title:"Intercom live chat "+Object(f.c)("message"),isPopoverOpen:p,shouldLoadStylesheet:!0},function(e,t){return m.a.createElement(st,{conversation:o,conversationSuggestions:c,onSuggestionClicked:l,part:r,frameWindow:e,onClose:i,onHeightChange:n.handleHeightChange,onPopoverToggle:n.handlePopoverToggle,onComposerClick:a,showReplyToButton:s,frameNode:t})})},n}(p.Component);function ht(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}dt.propTypes={conversation:r.a.object.isRequired,conversationSuggestions:r.a.shape({prompt:r.a.any,suggestions:r.a.arrayOf(r.a.shape({uuid:r.a.string.isRequired,text:r.a.string.isRequired,preAction:r.a.string}))}),onSuggestionClicked:r.a.func,part:r.a.object.isRequired,onClose:r.a.func.isRequired,onComposerClick:r.a.func,showReplyToButton:r.a.bool},n.d(t,"a",function(){return mt});var mt=function(o){var e,t;function n(){for(var a,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ft(ht(a=o.call.apply(o,[this].concat(t))||this),"addMessageMetric",function(e){var t=a.props,n=t.conversation,o=t.part,r=o.id,i=o.messageType;Object(V.e)(e,"message","in_app","from_full",{conversation_id:n.id,message_id:r,message_type:i})}),ft(ht(a),"handleDismissClick",function(){a.addMessageMetric("closed"),a.props.onClose()}),ft(ht(a),"handleComposerSuggestionClicked",function(e){var t=a.props,n=t.conversation,o=t.onSuggestionClicked;o&&o(n,e)}),a}t=o,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=n.prototype;return r.componentDidMount=function(){var e=this.props,t=e.conversation,n=e.userIsPresent,o=e.onOpen,r=e.onConversationRead;o(),!t.read&&n&&r(),this.addMessageMetric("received")},r.componentDidUpdate=function(){var e=this.props,t=e.userIsPresent,n=e.conversation;t&&!n.read&&this.props.onConversationRead()},r.render=function(){var e=this.props,t=e.appWindow,n=e.conversation,o=e.part,r=e.appName,i=e.isMobile,a=e.onComposerOrFormInputClick,s=e.onReactionSelect,c=e.showUploadButton,l=e.showGifButton,p=e.shouldShowUpfrontEmailComposer,u=e.onSuggestionClicked,d=e.conversationSuggestions,h=o.messageType,f=o.reactionsReply;switch(h){case"adminReply":case"link":case"messengerCard":case"notificationChannels":case"attributeCollector":case"conversationRating":case"chat":return i?m.a.createElement(I,{appName:r,part:o,onClose:this.handleDismissClick,composerState:n.composerState,onComposerOrFormInputClick:a}):m.a.createElement(dt,{conversation:n,conversationSuggestions:d,onSuggestionClicked:u,part:o,onClose:this.handleDismissClick,showReplyToButton:p,onComposerClick:a});case"video":return m.a.createElement(Re,{conversation:n,conversationSuggestions:d,onSuggestionClicked:u,standalone:!0,part:o,onClose:this.handleDismissClick,onComposerOrFormInputClick:a});case"note":return m.a.createElement(K,{conversationId:n.id,appName:r,message:o,reactionsReply:f,showUploadButton:c,showGifButton:l,onClose:this.handleDismissClick,onComposerClick:a,onReactionSelect:s,showReplyToButton:p});case"post":return m.a.createElement(se.a,{conversationId:n.id,appName:r,message:o,reactionsReply:f,onClose:this.handleDismissClick,onComposerClick:a,onReactionSelect:s,showReplyToButton:p});case"pointer":return m.a.createElement(ae,{appWindow:t,appName:r,message:o,conversationId:n.id,reactionsReply:f,onComposerClick:a,onReactionSelect:s,onClose:this.handleDismissClick})}},n}(p.Component);mt.propTypes={appWindow:r.a.object,conversation:r.a.shape({read:r.a.bool.isRequired}).isRequired,conversationSuggestions:r.a.shape({prompt:r.a.any,suggestions:r.a.arrayOf(r.a.shape({uuid:r.a.string.isRequired,text:r.a.string.isRequired,preAction:r.a.string}))}),onSuggestionClicked:r.a.func,part:r.a.shape({messageType:r.a.string}).isRequired,appName:r.a.string.isRequired,isMobile:r.a.bool.isRequired,userIsPresent:r.a.bool.isRequired,onConversationRead:r.a.func.isRequired,onOpen:r.a.func.isRequired,onClose:r.a.func.isRequired,onComposerOrFormInputClick:r.a.func.isRequired,onReactionSelect:r.a.func.isRequired,showUploadButton:r.a.bool,showGifButton:r.a.bool,shouldShowUpfrontEmailComposer:r.a.bool}},1067:function(e,t,n){"use strict";var o=n(115),l=n.n(o),r=n(117),i=n.n(r),a=n(1),u=n.n(a),s=n(1107),c=n.n(s),p=n(72),d=n.n(p);function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(r){var e,t;function n(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return f(h(e=r.call.apply(r,[this].concat(n))||this),"document",e.props.appWindow.document),f(h(e),"state",{container:null}),e}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.componentDidMount=function(){var e=this.props.appWindow,t=e.document.querySelector("#intercom-container");if(e.document.body){var n=e.document.createElement("div");n.id="intercom-positioner-tree",n.classList.add("intercom-namespace"),n.style.cssText="position: initial; !important; z-index: 2147483647 !important;",t.insertAdjacentElement("beforeBegin",n),this.setState({container:n})}},o.componentWillUnmount=function(){var e=this.state.container;if(e){var t=e.parentNode;t&&t.removeChild(e)}},o.render=function(){return this.state.container?d.a.createPortal(this.props.children,this.state.container):null},n}(a.Component),g=n(16),y=n(14),b=function(m){if(!m.IntercomIntersectionObserver){var g=m.document;if(!y.a.isFirefox()&&"IntersectionObserver"in m&&"IntersectionObserverEntry"in m&&"intersectionRatio"in m.IntersectionObserverEntry.prototype&&"isIntersecting"in m.IntersectionObserverEntry.prototype)return m.IntercomIntersectionObserver=m.IntersectionObserver,m.IntercomIntersectionObserverEntry=m.IntersectionObserverEntry,!0;var t=[];e.prototype.THROTTLE_TIMEOUT=100,e.prototype.POLL_INTERVAL=null,e.prototype.USE_MUTATION_OBSERVER=!0,e.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},e.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},e.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},e.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},e.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]})},e.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},e.prototype._monitorIntersections=function(){var t=this;this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(n(m,"resize",this._checkForIntersections,!0),this._observationTargets.forEach(function(e){t._monitorScrollForElement(e)}),this.USE_MUTATION_OBSERVER&&"MutationObserver"in m&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(g,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},e.prototype._monitorScrollForElement=function(e){e!==g&&e&&(n(e,"scroll",this._checkForIntersections,!0),this._monitorScrollForElement(e.parent))},e.prototype._unmonitorScrollForElement=function(e){e!==g&&e&&(o(e,"scroll",this._checkForIntersections,!0),this._unmonitorScrollForElement(e.parent))},e.prototype._unmonitorIntersections=function(){var t=this;this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,o(m,"resize",this._checkForIntersections,!0),this._observationTargets.forEach(function(e){t._unmonitorScrollForElement(e)}),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},e.prototype._checkForIntersections=function(){var s=this._rootIsInDom(),c=s?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(e){var t=e.element,n=b(t),o=this._rootContainsTarget(t),r=e.entry,i=s&&o&&this._computeTargetAndRootIntersection(t,c),a=e.entry=new l({time:m.performance&&performance.now&&performance.now(),target:t,boundingClientRect:n,rootBounds:c,intersectionRect:i});r?s&&o?this._hasCrossedThreshold(r,a)&&this._queuedEntries.push(a):r&&r.isIntersecting&&this._queuedEntries.push(a):this._queuedEntries.push(a)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},e.prototype._computeTargetAndRootIntersection=function(e,t){if("none"!=m.getComputedStyle(e).display){for(var n,o,r,i,a,s,c,l,p=b(e),u=v(e),d=!1;!d;){var h=null,f=1==u.nodeType?m.getComputedStyle(u):{};if("none"==f.display)return;if(u==this.root||u==g?(d=!0,h=t):u!=g.body&&u!=g.documentElement&&"visible"!=f.overflow&&(h=b(u)),h&&(n=h,o=p,void 0,r=Math.max(n.top,o.top),i=Math.min(n.bottom,o.bottom),a=Math.max(n.left,o.left),s=Math.min(n.right,o.right),l=i-r,!(p=0<=(c=s-a)&&0<=l&&{top:r,bottom:i,left:a,right:s,width:c,height:l})))break;u=v(u)}return p}},e.prototype._getRootRect=function(){var e;if(this.root)e=b(this.root);else{var t=g.documentElement,n=g.body;e={top:0,left:0,right:t.clientWidth||n.clientWidth,width:t.clientWidth||n.clientWidth,bottom:t.clientHeight||n.clientHeight,height:t.clientHeight||n.clientHeight}}return this._expandRectByRootMargin(e)},e.prototype._expandRectByRootMargin=function(n){var e=this._rootMarginValues.map(function(e,t){return"px"==e.unit?e.value:e.value*(t%2?n.width:n.height)/100}),t={top:n.top-e[0],right:n.right+e[1],bottom:n.bottom+e[2],left:n.left-e[3]};return t.width=t.right-t.left,t.height=t.bottom-t.top,t},e.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,o=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==o)for(var r=0;r<this.thresholds.length;r++){var i=this.thresholds[r];if(i==n||i==o||i<n!=i<o)return!0}},e.prototype._rootIsInDom=function(){return!this.root||r(g,this.root)},e.prototype._rootContainsTarget=function(e){return r(this.root||g,e)},e.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},e.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},m.IntercomIntersectionObserver=e,m.IntercomIntersectionObserverEntry=m.IntersectionObserverEntry}function l(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,o=this.intersectionRect,r=o.width*o.height;this.intersectionRatio=n?r/n:this.isIntersecting?1:0}function e(e,t){var n,o,r,i=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(i.root&&1!=i.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),o=this.THROTTLE_TIMEOUT,r=null,function(){r||(r=setTimeout(function(){n(),r=null},o))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(i.rootMargin),this.thresholds=this._initThresholds(i.threshold),this.root=i.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function n(e,t,n,o){"function"==typeof e.addEventListener?e.addEventListener(t,n,o||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function o(e,t,n,o){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,o||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function b(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function r(e,t){for(var n=t;n;){if(n==e)return!0;n=v(n)}return!1}function v(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}},v=function(e){var c=e,l=e.document,t=c.HTMLElement||c.Element,a=800,p={scroll:c.scroll||c.scrollTo,scrollBy:c.scrollBy||c.intercomScrollBy,elementScroll:d,intercomScrollIntoView:t.prototype.intercomScrollIntoView},u=c.performance&&c.performance.now?c.performance.now.bind(c.performance):Date.now;var n,o=(n=c.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(n)?1:0);function d(e,t){this.scrollLeft=e,this.scrollTop=t}function r(e){if(null===e||"object"!=typeof e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function i(e,t){return"Y"===t?e.clientHeight+o<e.scrollHeight:"X"===t?e.clientWidth+o<e.scrollWidth:void 0}function s(e,t){var n=c.getComputedStyle(e,null)["overflow"+t];return"auto"===n||"scroll"===n}function h(e){var t,n,o,r,i=(u()-e.startTime)/a;r=i=1<i?1:i,t=.5*(1-Math.cos(Math.PI*r)),n=e.startX+(e.x-e.startX)*t,o=e.startY+(e.y-e.startY)*t,e.method.call(e.scrollable,n,o),n===e.x&&o===e.y||c.requestAnimationFrame(h.bind(c,e))}function f(e,t,n){var o,r,i,a,s=u();a=e===l.body?(r=(o=c).scrollX||c.pageXOffset,i=c.scrollY||c.pageYOffset,p.scroll):(r=(o=e).scrollLeft,i=e.scrollTop,d),h({scrollable:o,method:a,startTime:s,startX:r,startY:i,x:t,y:n})}c.intercomScrollBy=function(){void 0!==arguments[0]&&(r(arguments[0])?p.scrollBy.call(c,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):f.call(c,l.body,~~arguments[0].left+(c.scrollX||c.pageXOffset),~~arguments[0].top+(c.scrollY||c.pageYOffset)))},t.prototype.intercomScrollIntoView=function(){if(!0!==r(arguments[0])){var e=function(e){for(var t,n,o;!1==((e=e.parentNode)===l.body)&&!1===(n=i(t=e,"Y")&&s(t,"Y"),o=i(t,"X")&&s(t,"X"),n||o););return e}(this),t=e.getBoundingClientRect(),n=this.getBoundingClientRect();e!==l.body?(f.call(this,e,e.scrollLeft+n.left-t.left,e.scrollTop+n.top-t.top),"fixed"!==c.getComputedStyle(e).position&&c.intercomScrollBy({left:t.left,top:t.top,behavior:"smooth"})):c.intercomScrollBy({left:n.left,top:n.top,behavior:"smooth"})}else p.intercomScrollIntoView.call(this,void 0===arguments[0]||arguments[0])}},O=n(1108),C=function(e,t){var n,o=t.element;if(!o)return e;var r=e.placement.split("-")[0],i=e.offsets,a=i.popper,s=i.reference,c=-1!==["left","right"].indexOf(r),l=c?"height":"width",p=c?"Top":"Left",u=p.toLowerCase(),d=c?"left":"top",h=c?"bottom":"right",f=Object(O.getOuterSizes)(o)[l];s[h]-f<a[u]&&(e.offsets.popper[u]-=a[u]-(s[h]-f)),s[u]+f>a[h]&&(e.offsets.popper[u]+=s[u]+f-a[h]),e.offsets.popper=Object(O.getClientRect)(e.offsets.popper);var m=s[u]+s[l]/2-f/2,g=Object(O.getStyleComputedProperty)(e.instance.popper),b=parseFloat(g["margin"+p]),v=parseFloat(g["border"+p+"Width"]),y=m-e.offsets.popper[u]-b-v;return y=Math.max(Math.min(a[l]-f-32,y),0),e.arrowElement=o,e.offsets.arrow=((n={})[u]=Math.round(y),n[d]="",n),e},w=n(1052);function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function(r){var e,t;function n(){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return k(S(t=r.call.apply(r,[this].concat(n))||this),"eventBlockerRef",void 0),k(S(t),"stopBubbling",function(e){"click"===e.type&&t.props.onClickEvent&&t.props.onClickEvent(),e.stopPropagation()}),t}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.componentDidMount=function(){var t=this;this.eventBlockerRef&&this.props.events.forEach(function(e){Object(g.c)(t.eventBlockerRef,e,t.stopBubbling)})},o.componentWillUnmount=function(){var t=this;this.eventBlockerRef&&this.props.events.forEach(function(e){Object(g.y)(t.eventBlockerRef,e,t.stopBubbling)})},o.render=function(){var t=this;return u.a.createElement("div",{className:"event-blocker",ref:function(e){return t.eventBlockerRef=e}},this.props.children)},n}(a.Component);function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(e){R(t,e,n[e])})}return t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return _});var _=function(r){var e,t;function n(){for(var o,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return R(x(o=r.call.apply(r,[this].concat(t))||this),"arrow",void 0),R(x(o),"node",void 0),R(x(o),"arrowContainer",void 0),R(x(o),"positioner",void 0),R(x(o),"targetInDom",void 0),R(x(o),"IntersectionObserver",void 0),R(x(o),"missingSelectorTimeout",void 0),R(x(o),"scrollIntoViewTimeout",void 0),R(x(o),"repositionCheckTimeout",void 0),R(x(o),"mutationObserver",void 0),R(x(o),"state",{styles:null,arrowStyles:null,hide:!1,nodeInViewPort:!1,nodeIsEntirelyInViewport:!1,positionerOffsetForMask:{left:0,top:0},placement:null,maskStyles:{padding:0,top:0,left:0,width:0,height:0}}),R(x(o),"targetWithClickHandler",null),R(x(o),"updateElementPosition",function(e){var t=e.styles,n=e.arrowStyles;return o.setState({styles:t,hide:!o.targetIsVisible(),arrowStyles:n}),e.attributes&&o.applyAttributes(e.attributes),o.checkIfRepositionRequired(e),e}),R(x(o),"updateMaskPosition",function(){var e=o.getMaskStyles();i()(o.state.maskStyles,e)||o.setState({maskStyles:e})}),R(x(o),"handleOverlayClick",function(){o.scrollIntoView(),o.props.onOverlayClick&&o.props.onOverlayClick()}),R(x(o),"handleTargetClick",function(){o.props.onTargetClick&&o.props.onTargetClick()}),R(x(o),"handlePlacementChange",function(){o.props.onPlacementChange&&o.state.placement&&o.props.onPlacementChange(o.state.placement)}),R(x(o),"renderOverlay",function(){var e=o.getTargetNode();return o.props.renderOverlay(o.handleOverlayClick,o.props,e)}),o}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.reinitializeObjects=function(){this.initializeIntersectionObserver(),this.initializePositioner(),this.setupTargetClickHandler()},o.componentDidMount=function(){this.initializeMuationObserver(),this.reinitializeObjects(),this.updateMaskPosition()},o.shouldComponentUpdate=function(e,t){return!i()(this.props,e)||!i()(this.state,t)},o.componentDidUpdate=function(e,t){e.targetSelector!==this.props.targetSelector?this.reinitializeObjects():this.positioner?this.positioner.scheduleUpdate():this.reinitializeObjects(),t.placement!==this.state.placement&&this.handlePlacementChange()},o.componentWillUnmount=function(){var e,t,n=this.props.appWindow;this.destroyIntersectionObserver(),this.destroyPositioner(),this.destroyTargetClickHandler(),(e=n).IntercomIntersectionObserver&&(delete e.IntercomIntersectionObserver,delete e.IntercomIntersectionObserverEntry),((t=n).HTMLElement||t.Element).prototype.intercomScrollIntoView=null,t.intercomScrollBy&&delete t.intercomScrollBy,this.missingSelectorTimeout&&clearTimeout(this.missingSelectorTimeout),this.scrollIntoViewTimeout&&clearTimeout(this.scrollIntoViewTimeout),this.repositionCheckTimeout&&clearTimeout(this.repositionCheckTimeout),this.mutationObserver&&this.mutationObserver.disconnect()},o.getTargetNode=function(){var e=this.props,t=e.targetSelector,n=e.appWindow;try{return n.document.querySelector(t)}catch(e){return null}},o.setupTargetClickHandler=function(){this.destroyTargetClickHandler(),this.targetWithClickHandler=this.getTargetNode(),this.targetWithClickHandler&&Object(g.c)(this.targetWithClickHandler,"click",this.handleTargetClick,!0)},o.destroyTargetClickHandler=function(){this.targetWithClickHandler&&Object(g.y)(this.targetWithClickHandler,"click",this.handleTargetClick)},o.storeMaskOffsetsBasedOnFlipPosition=function(e){if(this.props.scrollable){var t=e["x-placement"];switch(t){case"bottom":this.setState({placement:t,positionerOffsetForMask:{left:0,top:3}});break;case"top":this.setState({placement:t,positionerOffsetForMask:{left:0,top:-3}});break;case"left":this.setState({placement:t,positionerOffsetForMask:{left:-5,top:0}});break;case"right":this.setState({placement:t,positionerOffsetForMask:{left:3,top:0}});break;default:return}}},o.applyAttributes=function(n){var e=this;[this.arrowContainer,this.node].forEach(function(t){t&&"function"==typeof t.querySelectorAll&&Object.keys(n).forEach(function(e){t&&t.setAttribute&&t.setAttribute(e,n[e])}),e.storeMaskOffsetsBasedOnFlipPosition(n)})},o.checkIfRepositionRequired=function(e){var t=this,n=e.styles,o=e.attributes;if(this.repositionCheckTimeout&&clearTimeout(this.repositionCheckTimeout),o&&!1!==o["x-out-of-boundaries"]&&n&&n.transform){var r=(n.transform.match(/(-{0,1}\d+)px/g)||[]).map(function(e){return Number(e.replace("px",""))}),i=parseInt(r[0]),a=parseInt(r[1]);i<0&&a<0&&(this.repositionCheckTimeout=setTimeout(function(){t.nodeIsVisible()&&t.reinitializeObjects()},500))}},o.targetIsVisible=function(){if(!this.state.nodeInViewPort)return!1;var e=this.getTargetNode();return Object(g.u)(e)},o.scrollIntoView=function(){var n=this,e=this.props.appWindow;v(e),this.scrollIntoViewTimeout=setTimeout(function(){var e=n.state.nodeIsEntirelyInViewport,t=n.getTargetNode();t&&!e&&t.intercomScrollIntoView({behavior:"smooth",block:"center",inline:"center"})},200)},o.initializeMuationObserver=function(){var e=this,t=this.props.appWindow;this.targetInDom=!!this.getTargetNode(),this.mutationObserver=new MutationObserver(function(){e.targetInDom&&!e.getTargetNode()&&(e.targetInDom=!1,e.destroyPositioner(),e.forceUpdate()),!e.targetInDom&&e.getTargetNode()&&(e.targetInDom=!0,e.forceUpdate()),e.updateMaskPosition()}),this.mutationObserver.observe(t.document.body,{attributes:!0,subtree:!0,childList:!0})},o.initializePositioner=function(){var e=this.props.scrollable,t=this.getTargetNode();t&&this.node&&(e&&this.scrollIntoView(),this.positioner=new c.a(t,this.node,{positionFixed:!1,placement:"auto",modifiers:{applyStyle:{enabled:!1},preventOverflow:{boundariesElement:"viewport"},arrow:{enabled:!0,element:this.arrow,fn:C},updateElementPosition:{enabled:!0,fn:this.updateElementPosition,order:900}}}))},o.initializeIntersectionObserver=function(){var s=this,e=this.props.appWindow,c=this.getTargetNode();c&&(e.IntercomIntersectionObserver||b(e),this.IntersectionObserver=new e.IntercomIntersectionObserver(function(e){if(0!==e.length){var t=l()(e,["time"],["desc"])[0],n=t.isIntersecting,o=t.intersectionRatio,r=n,i=n&&Object(g.u)(c),a=1===o;s.setState({hide:!i,nodeInViewPort:r,nodeIsEntirelyInViewport:a})}},{threshold:.05}),this.IntersectionObserver.observe(c))},o.destroyPositioner=function(){this.positioner&&(this.positioner.destroy(),delete this.positioner)},o.destroyIntersectionObserver=function(){this.IntersectionObserver&&this.IntersectionObserver.disconnect()},o.reinitializePointer=function(){this.destroyPositioner(),this.initializePositioner()},o.reinitializeIntersectionObserver=function(){this.destroyIntersectionObserver(),this.initializeIntersectionObserver()},o.mergedStyles=function(){var e=this.props.scrollable,t=this.state,n=t.styles,o=t.positionerOffsetForMask;if(!n)return{};if(!e)return n;var r=o.left,i=o.top;return E({},n,{left:n.left+r,top:n.top+i})},o.nodeIsVisible=function(){var e=this.getTargetNode();return e&&Object(g.u)(e)},o.getStyles=function(){var e=this.props.hideArrow,t=this.props.childDimensions||{},n=t.height,o=t.width,r=t.opacity,i=e?5:15;if(this.nodeIsVisible()){var a=!this.state.hide&&n&&o&&r?1:0;return this.onSelectorMatch(),E({},this.mergedStyles(),{opacity:a,margin:i})}if(this.props.renderFallback){var s=(this.props.childDimensions||{}).opacity;return this.props.targetSelector&&this.onMissingSelector(),{position:"fixed",top:"calc(50% - "+(n||0)/2+"px)",left:"calc(50% - "+(o||0)/2+"px)",opacity:s,margin:i}}},o.getArrowStyles=function(){var e=this.state,t=e.arrowStyles,n=e.hide,o=this.props.childDimensions||{},r=o.height,i=o.width,a=!n&&r&&i?1:0;return t?{top:t.top,left:t.left,opacity:a}:{opacity:a}},o.getMaskStyles=function(){var e=this.getTargetNode();if(!e||!this.props.scrollable||this.state.hide)return{padding:0,top:0,left:0,width:0,height:0};var t=e.getBoundingClientRect(),n=t.top,o=t.left,r=t.width,i=t.height,a=this.props.appWindow;return{padding:3,top:n-3+a.pageYOffset,left:o-3+a.pageXOffset,width:r,height:i}},o.renderArrow=function(){var t=this;return u.a.createElement(w.b,{style:E({},this.getArrowStyles()),ref:function(e){return t.arrow=e}},u.a.createElement(w.a,{frameName:"intercom-positioner-arrow-frame"},function(){return u.a.createElement(w.e,{style:{display:t.props.hideArrow?"none":"block"},ref:function(e){return t.arrowContainer=e}})}))},o.onMissingSelector=function(){var e=this;this.missingSelectorTimeout||(this.missingSelectorTimeout=setTimeout(function(){!e.nodeIsVisible()&&e.props.onMissingSelector&&e.props.onMissingSelector()},300))},o.onSelectorMatch=function(){this.props.onSelectorMatch&&this.props.onSelectorMatch()},o.render=function(){var t=this,e=this.props,n=e.scrollable,o=e.shouldAnimate,r=e.renderFallback,i=e.children,a=e.appWindow,s=this.getTargetNode();if(!s&&!r)return null;var c=this.state.maskStyles,l=c.width,p=c.height;return u.a.createElement(m,{appWindow:a},u.a.createElement(u.a.Fragment,null,u.a.createElement(w.g,{ref:function(e){return t.node=e},style:this.getStyles()},u.a.createElement(w.d,null,this.nodeIsVisible()?this.renderArrow():null,this.targetIsVisible()||r?i:null)),u.a.createElement(w.f,{style:c,isStep:n&&!!s,isPost:n&&!s,isAnimating:o,height:p,width:l}),u.a.createElement(j,{events:["auxclick","click","dblclick","mousedown","mouseup"],onClickEvent:function(){return t.handleOverlayClick()}},this.renderOverlay())))},n}(a.Component);R(_,"defaultProps",{hideArrow:!1,renderFallback:!1,shouldAnimate:!1,renderOverlay:function(e,t){var n=t.scrollable;return u.a.createElement(w.c,{onClick:e,scrollable:n,tabIndex:"-1"})}})},1127:function(e,t,n){e.exports=n.p+"images/video-mask.4f0cea30.svg"},1128:function(e,t,n){e.exports=n.p+"images/video-mask-right.07f09b90.svg"},1140:function(e,t,n){"use strict";n.r(t);var o=n(28),l=n(49),r=n(149),R=n(1),_=n.n(R),i=n(20),T=n.n(i),h=n(989),f=n(996),I=n(19),m=n(992),P=n(441),a=n(264),s=n(0),c={name:"isshev",styles:"padding:25px 0px;"},p=Object(s.c)("div",{target:"e1mknya50"})("position:relative;padding:8px;order:0;flex:0 1 100%;align-self:auto;display:flex;justify-content:flex-end;align-items:center;border-top:1px solid #eee;",function(e){return e.hideButton&&c}," ",function(e){return e.isVideoStep&&Object(s.b)("transition:transform 300ms cubic-bezier(0.165,0.84,0.44,1),opacity 10ms;transform:translateY(100%);margin-top:4px;border-radius:5px;position:absolute;bottom:0;left:0;right:0;border:0;opacity:0;",y.className,"{color:#fff;font-size:14px;}")}),u=Object(s.c)("div",{target:"e1mknya51"})("flex:0 1 auto;position:relative;button{font-size:14px;background-color:",Object(s.f)("appColor"),";color:white;font-weight:bold;padding:10px 20px;border-radius:4px;cursor:pointer;}button[disabled]{opacity:0.6;}",function(e){return e.animating&&Object(s.b)("animation:",d()," 500ms;")}),d=function(){return Object(s.d)("0%{",b,";}25%{",g,";}49%{",b,";}50%{",b,";}75%{",v,";}100%{",b,";}")},g={name:"1ldqog6",styles:"transform:scale(1.1);"},b={name:"41q668",styles:"transform:scale(1);"},v={name:"kp0j2p",styles:"transform:scale(1.05);"},y=Object(s.c)("div",{target:"e1mknya52"})("position:absolute;left:0;right:0;text-align:center;color:",Object(s.f)("installGrey1"),";font-size:14px;");function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(r){var e,t;function n(){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return C(O(t=r.call.apply(r,[this].concat(n))||this),"button",void 0),C(O(t),"disabledButton",void 0),C(O(t),"inputFieldValidation",void 0),C(O(t),"state",{buttonIsAnimating:!1,disabledButton:!1}),C(O(t),"finishButtonAnimation",function(){t.button&&t.setState({buttonIsAnimating:!1})}),C(O(t),"validateInput",function(){t.setState({disabledButton:!0}),t.inputFieldValidation=new a.c(t.props.selector,function(e){t.setState({disabledButton:!e})}),t.inputFieldValidation.run()}),C(O(t),"handleOnContinue",function(){t.state.disabledButton||t.props.onContinue()}),t}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.componentDidMount=function(){this.button&&this.button.addEventListener("animationend",this.finishButtonAnimation),"type"===this.props.progressionBehavior&&this.validateInput()},o.componentDidUpdate=function(){var e=this.props.resetOverlayClick;this.props.hasClickedOverlay&&(this.setState({buttonIsAnimating:!0}),e())},o.componentWillUnmount=function(){this.inputFieldValidation&&this.inputFieldValidation.destroy()},o.render=function(){var t=this,e="click"!==this.props.progressionBehavior;return _.a.createElement(p,{hideButton:!e,isVideoStep:this.props.isVideoStep},_.a.createElement(y,null,Object(I.c)("product_tours_tour_step_number",{start_number:this.props.activeStepIndex+1,end_number:this.props.stepCount})),e&&_.a.createElement(u,{animating:this.state.buttonIsAnimating,ref:function(e){return t.button=e}},_.a.createElement("button",{disabled:this.state.disabledButton,onClick:this.handleOnContinue,tabIndex:"0"},this.props.activeStepIndex+1===this.props.stepCount?Object(I.c)("product_tours_done"):Object(I.c)("product_tours_next"))))},n}(R.Component),w=n(114),B=n(1043),M=n(999),S=n(1127),k=n.n(S),j=n(1128),E=n.n(j),x=n(1023),A=n(254),F=n(378),H=Object(s.c)("div",{target:"e1ggaaxy0"})("opacity:0;position:absolute;left:0;top:0;cursor:pointer;right:0;bottom:0;background:rgba(0,0,0,0.4);transition:opacity 300ms cubic-bezier(0.165,0.84,0.44,1);",x.c.className,"{right:50%;bottom:50%;margin-right:-22px;margin-bottom:-22px;background-size:44px 44px;}",M.a.className," svg > g > g{fill:",Object(s.f)("white"),";}"),V=Object(s.c)("div",{target:"e1ggaaxy1"})("mask-image:url(",k.a,");"),q=Object(s.c)("div",{target:"e1ggaaxy2"})(),W=Object(s.c)("div",{target:"e1ggaaxy3"})("position:relative;",M.a.className,"{right:8px;top:18px;}",F.a.className,"{padding:20px;padding-bottom:16px;font-weight:400;}.timeline-intercom-video-step-mask{mask-image:url('../images/video-tours-mask.svg');}",x.d.className,"{position:relative;}&:hover{",A.b.className,"{transform:translateY(28px);opacity:0;}",H.className,"{opacity:1;&.intercom-tour-step-video-overlay-hidden{opacity:0;}",p.className,"{transform:translateY(0);opacity:1;}}}",function(e){return e.videoComplete&&Object(s.b)(A.b.className,"{transform:translateY(28px);opacity:0;}",H.className,"{opacity:1;&.intercom-tour-step-video-overlay-hidden{opacity:0;}",p.className,"{transform:translateY(0);opacity:1;}}")}," ",function(e){return"right"===e.placement&&Object(s.b)(V.className,"{mask-image:url(",E.a,");transform:rotate(180deg);}",q.className,"{transform:rotate(180deg);}",p.className,"{left:10px;}",M.a.className,"{right:8px;top:8px;}",A.b.className,"{left:10px;margin-right:10px;}")}," ",function(e){return"left"===e.placement&&Object(s.b)(V.className,"{mask-image:url(",E.a,");}",p.className,"{right:10px;}",M.a.className,"{right:18px;top:8px;}",A.b.className,"{left:-10px;margin-left:10px;}")}," ",function(e){return"top"===e.placement&&Object(s.b)(q.className,"{transform:rotate(180deg);}",p.className,"{bottom:10px;}",V.className,"{transform:rotate(180deg);}",M.a.className,"{right:8px;top:8px;}",A.b.className,"{bottom:0px;padding-bottom:10px;}")});function D(e){var t=e.muted,n=e.onClick;return _.a.createElement(x.b,{muted:t,onClick:n})}var z=n(6),L=Object(z.createSelector)(l.n,l.m,function(e,t){return{muted:e,userHasInteractedWithVideo:t}}),U=Object(o.connect)(L,{changeVideoMuted:r.a})(function(e){var t=e.block,n=t.url,o=t.captions,r=t.thumbnailUrl,i=e.placement,a=e.activeStepIndex,s=e.stepCount,c=e.onClose,l=e.onContinue,p=e.muted,u=e.changeVideoMuted,d=e.userHasInteractedWithVideo,h=e.hasClickedOverlay,f=e.resetOverlayClick,m=e.selector,g=e.progressionBehavior,b=Object(R.useState)(!0),v=b[0],y=b[1],O=Object(R.useState)(),C=O[0],w=O[1],S=Object(R.useState)(!1),k=S[0],j=S[1],E=function(){p&&w(0),u(!p)},x=T()("intercom-tour-step-video-overlay",{"intercom-tour-step-video-overlay-hidden":k});return _.a.createElement(W,{placement:i,videoComplete:!v},_.a.createElement(V,null,_.a.createElement(q,null,_.a.createElement(B.a,{srcUrl:n,captions:p?o:void 0,showControls:!1,onComplete:function(){y(!1)},onReplay:function(){return y(!0)},muted:p,startTime:C,loop:!d&&p,thumbnailUrl:r}),_.a.createElement(H,{className:x,onClick:function(e){e.target.classList.contains("intercom-tour-step-video-overlay")&&E(),j(!0)},onMouseMove:function(){return j(!1)}},_.a.createElement(M.a,{onClick:c,"aria-label":Object(I.c)("close")},_.a.createElement(P.a,null)),v&&_.a.createElement(D,{muted:p,onClick:E}),1<s?_.a.createElement(N,{activeStepIndex:a,stepCount:s,onContinue:l,selector:m,hasClickedOverlay:h,resetOverlayClick:f,progressionBehavior:g,isVideoStep:!0}):null))))});function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X=function(r){var e,t;function n(){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return Y(G(t=r.call.apply(r,[this].concat(n))||this),"state",{isScrolled:!1}),Y(G(t),"handleScroll",function(e){t.setState({isScrolled:0<e.target.scrollTop})}),Y(G(t),"handleOnCloseClick",function(){t.props.onStop()}),t}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.getClassNames=function(){return T()({"intercom-tour-step":!0,"intercom-tour-step-pointer":this.isPointer(),"intercom-tour-step-post":!this.isPointer()})},o.calculateWidth=function(){var e=this.props.appWindow.innerWidth;return Math.min(624,e)-80},o.isPointer=function(){return!!this.props.selector},o.getStyles=function(){if(!this.isPointer())return{width:this.calculateWidth()+"px"}},o.onLoad=function(){this.props.onLoad&&this.props.onLoad()},o.componentDidUpdate=function(e){this.props.step.id!==e.step.id&&this.onLoad()},o.componentDidMount=function(){this.props.onLoad()},o.renderVideoTourStep=function(){var e=this.props,t=e.onContinue,n=e.activeStepIndex,o=e.stepCount,r=e.placement,i=e.selector,a=e.step,s=a.blocks,c=a.progressionBehavior,l=e.hasClickedOverlay,p=e.resetOverlayClick;return r?_.a.createElement(U,{block:s[0],placement:r,activeStepIndex:n,stepCount:o,selector:i,onClose:this.handleOnCloseClick,onContinue:t,hasClickedOverlay:l,resetOverlayClick:p,progressionBehavior:c}):null},o.renderTourStep=function(){var e=this.props,t=e.onContinue,n=e.activeStepIndex,o=e.stepCount,r=e.author,i=e.appName,a=e.selector,s=e.step,c=s.blocks,l=s.progressionBehavior,p=s.id,u=e.hasClickedOverlay,d=e.resetOverlayClick;return _.a.createElement(m.b,{appName:i,isReplyStyle:!1,author:r},_.a.createElement("div",{className:"intercom-tour-step-header"},_.a.createElement(M.a,{onClick:this.handleOnCloseClick,"aria-label":Object(I.c)("close")},_.a.createElement(P.a,null))),_.a.createElement(M.b,{className:"intercom-tour-step-content"},_.a.createElement(f.a,{onScroll:this.handleScroll},_.a.createElement(h.a,{blocks:c,key:"tour-step-block-"+p}))),1<o?_.a.createElement(N,{activeStepIndex:n,stepCount:o,onContinue:t,selector:a,progressionBehavior:l,hasClickedOverlay:u,resetOverlayClick:d,isVideoStep:!1}):null)},o.render=function(){var e=this.props.step.blocks,t=this.state.isScrolled,n=this.isPointer();return _.a.createElement(M.c,{className:this.getClassNames(),style:this.getStyles(),isPointer:n,isPost:!n,scrolled:t},Object(w.g)(e)?this.renderVideoTourStep():this.renderTourStep())},n}(R.Component),K=n(431),J=n(1067),Q=n(9),$=Object(s.c)("div",{target:"ekepq2u0"})("position:absolute;z-index:",Object(Q.j)(),";");function Z(e){var t,n,o,r,i,a,s,c,l,p,u,d=e.onClick,h=e.appWindow,f=e.targetNode,m=(t=h,n=f.getBoundingClientRect(),o=n.left,r=n.right,i=n.top,a=n.bottom,s=t.pageXOffset,c=t.pageYOffset,{left:o+=s,right:r+=s,top:i+=c,bottom:a+=c}),g=m.left,b=m.right,v=m.top,y=m.bottom,O=(l=h.document,p=l.body,u=l.documentElement,p&&u?Math.max(p.scrollHeight,p.offsetHeight,u.clientHeight,u.scrollHeight,u.offsetHeight):0);return _.a.createElement(_.a.Fragment,null,_.a.createElement($,{style:{top:0,left:0,right:0,height:v},tabIndex:"none",onClick:d}),_.a.createElement($,{style:{top:v,left:0,width:g,height:y-v},tabIndex:"none",onClick:d}),_.a.createElement($,{style:{top:v,left:b,right:0,height:y-v},tabIndex:"none",onClick:d}),_.a.createElement($,{style:{top:y,left:0,right:0,bottom:0,height:O-y},tabIndex:"none",onClick:d}))}var ee=n(275),te={name:"1j1kj5x",styles:"border:none;box-shadow:none;"},ne=Object(s.c)(ee.a,{target:"e1s9bqu40"})("z-index:",Object(Q.j)(1),";border-radius:5px;box-shadow:0 3px 32px 0 rgba(0,0,0,0.14);border:1px solid rgba(0,0,0,0.1);",function(e){return e.isVideo&&te}),oe=n(4);function re(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(e){ae(t,e,n[e])})}return t}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var se=function(o){var e,t;function n(){for(var i,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ae(ie(i=o.call.apply(o,[this].concat(t))||this),"state",{width:0,height:0,opacity:0,placement:null,hasClickedOverlay:!1,recordFailureStats:!1}),ae(ie(i),"handleDimensionFrameSize",function(e){var t=e.height,n=e.width;i.setState({width:n,height:t,opacity:1})}),ae(ie(i),"trackingKey",function(e){return i.props.isPreviewingTour?e+"_preview":e}),ae(ie(i),"handleOnTourContinue",function(){var e=i.props,t=e.onContinue,n=e.activeStepIndex,o=e.stepCount;i.setState({opacity:0,recordFailureStats:!1}),t();var r=n+1===o?"done":"next";Object(oe.e)("clicked",r,i.trackingKey("tour"),null,i.trackingMetadata())}),ae(ie(i),"handleOnTourStop",function(){var e=i.props.onStop;Object(oe.e)("clicked","stop",i.trackingKey("tour"),null,i.trackingMetadata()),i.setState({opacity:0,recordFailureStats:!1}),e()}),ae(ie(i),"handleMissingCssSelector",function(){var e=i.props,t=e.activeStep,n=e.onFailure,o=e.isPreviewingTour;t.selector&&(Object(oe.e)("css_selector_match_failed",i.trackingKey("tour_step"),"positioner",null,re({},i.trackingMetadata(),i.activeStepSelectorMetadata())),!o&&i.state.recordFailureStats&&n())}),ae(ie(i),"handleTourStepLoad",function(){var e=i.props,t=e.stepCount,n=e.activeStepIndex,o=e.onComplete;n+1===t&&o(),i.setState({recordFailureStats:!0}),Object(oe.e)("viewed",i.trackingKey("tour_step"),"tour",null,i.trackingMetadata())}),ae(ie(i),"handleOverlayClick",function(){Object(oe.e)("clicked",i.trackingKey("outside_tour_step"),"tour",null,i.trackingMetadata()),i.setState({hasClickedOverlay:!0})}),ae(ie(i),"resetOverlayClick",function(){i.setState({hasClickedOverlay:!1})}),ae(ie(i),"handleTargetClick",function(){i.isClickToProgress()&&i.handleOnTourContinue()}),ae(ie(i),"handlePlacementChange",function(e){i.setState({placement:e})}),ae(ie(i),"isClickToProgress",function(){return"click"===i.props.activeStep.progressionBehavior}),ae(ie(i),"needsInteractionWithElement",function(){var e=i.props.activeStep.progressionBehavior;return"click"===e||"type"===e}),ae(ie(i),"getOverlayRenderer",function(){if(i.needsInteractionWithElement())return i.clickToProgressOverlayRenderer}),ae(ie(i),"clickToProgressOverlayRenderer",function(e,t,n){var o=t.appWindow;return n?_.a.createElement(Z,{onClick:e,targetNode:n,appWindow:o}):null}),i}t=o,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=n.prototype;return r.getChildDimensions=function(){var e=this.state;return{width:e.width,height:e.height,opacity:e.opacity}},r.getFrameDimensions=function(){var e=this.state;return{width:e.width,height:e.height}},r.trackingMetadata=function(){var e=this.props,t=e.activeTourId,n=e.activeStep,o=e.activeStepIndex,r=e.stepCount;return{tour_id:t,tour_step_id:n.id,active_step_index:o,step_count:r}},r.activeStepSelectorMetadata=function(){var e=this.props.activeStep,t=!1;if(e.selectors.auto_secondary)try{t=null!=window.parent.document.querySelector(e.selectors.auto_secondary)}catch(e){}return re({},e.selectors,{secondary_currently_matches:t})},r.render=function(){var e=this,t=this.props,n=t.appWindow,o=t.appName,r=t.author,i=t.activeStep,a=t.stepCount,s=t.activeStepIndex,c=this.state.placement,l=Object(w.g)(i.blocks);return _.a.createElement(J.a,{appWindow:n,scrollable:!0,targetSelector:i.selector,childDimensions:this.getChildDimensions(),renderFallback:!0,key:"tour-step-"+i.id,onMissingSelector:this.handleMissingCssSelector,onOverlayClick:this.handleOverlayClick,onTargetClick:this.handleTargetClick,onPlacementChange:this.handlePlacementChange,hideArrow:l||!i.selector,renderOverlay:this.getOverlayRenderer(),shouldAnimate:this.isClickToProgress()},_.a.createElement(ne,{style:this.getFrameDimensions(),frameName:"intercom-tour-frame",className:"intercom-tour-frame",title:"Intercom live chat "+Object(I.c)("tour"),isVideo:l,shouldLoadStylesheet:!0},function(){return _.a.createElement(K.a,{id:"tour-frame",key:"tour-frame",onChange:e.handleDimensionFrameSize},_.a.createElement(X,{appWindow:n,appName:o,author:r,step:i,activeStepIndex:s,stepCount:a,selector:i.selector,onLoad:e.handleTourStepLoad,onContinue:e.handleOnTourContinue,onStop:e.handleOnTourStop,placement:c,hasClickedOverlay:e.state.hasClickedOverlay,resetOverlayClick:e.resetOverlayClick}))}))},n}(R.PureComponent);n.d(t,"mapStateToProps",function(){return ce}),n.d(t,"mapDispatchToProps",function(){return le});var ce=function(e){var t=Object(l.c)(e),n=Object(l.f)(e),o=Object(l.e)(e),r=Object(l.d)(e),i=Object(l.a)(e),a=Object(l.h)(e),s=Object(l.b)(e),c=e.app.name;return{activeTourId:t.id,activeStep:n,activeStepIndex:o,stepCount:r,appName:c,author:i,isPreviewingTour:a,endTourAnimation:s}},le=function(e){return{onContinue:function(){e(Object(r.e)())},onStop:function(){e(Object(r.j)())},onComplete:function(){e(Object(r.c)())},onFailure:function(){e(Object(r.f)())}}};t.default=Object(o.connect)(ce,le)(se)},1141:function(e,t,n){"use strict";n.r(t);var O=n(1),C=n.n(O),o=n(431),r=n(28),a=n(15),i=n(7),s=n.n(i),w=n(24),c=n(282),l=n(992),p=n(991),u=n(1024),d=n(114),h=n(1033),f=n(418),m=n(182),g=n(1048),S=n(4);function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(r){var e,t;function n(){for(var o,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return v(b(o=r.call.apply(r,[this].concat(t))||this),"addSnippetMetric",function(e){var t=o.props.conversation,n=Object(w.r)(t);Object(S.e)(e,"snippet","in_app","",{conversation_id:t.id,part_id:n.id,part_type:n.messageType})}),v(b(o),"addClickedMetric",function(){o.addSnippetMetric("clicked")}),v(b(o),"handleClick",function(){var e=o.props,t=e.conversation,n=e.onClick;o.addClickedMetric(),n(t)}),o}t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.componentDidMount=function(){this.addSnippetMetric("received")},o.shouldRenderChatStyle=function(){var e=this.props,t=e.conversation,n=e.stack;return(Object(w.j)(t)||Object(w.i)(t))&&!n},o.getConversationParts=function(){return this.props.conversation.parts.filter(function(e){return!1===Object(f.a)(e.partType)})},o.renderBody=function(e){if(1===e.length&&Object(d.h)(e[0]))return C.a.createElement(h.a,{text:Object(d.d)(e[0])});var t=Object(d.e)(this.getConversationParts()).summaryText;return C.a.createElement(c.a,{text:t})},o.renderPlainStyle=function(e,t,n,o){return C.a.createElement(m.a,null,C.a.createElement(g.b,{className:"intercom-snippet",onClick:this.handleClick},C.a.createElement(l.b,{appName:n,author:e,isReplyStyle:o},C.a.createElement("div",{className:"intercom-snippet-body"},this.renderBody(t)))))},o.renderChatStyle=function(e,t,n,o){return C.a.createElement(m.a,null,C.a.createElement(g.a,{className:"intercom-chat-snippet",onClick:this.handleClick},C.a.createElement("div",{className:"intercom-chat-snippet-avatar"},C.a.createElement(p.a,{author:e})),C.a.createElement("div",{className:"intercom-chat-snippet-card"},C.a.createElement(u.a,{author:e,appName:n,isReplyStyle:o}),C.a.createElement("div",{className:"intercom-snippet-body intercom-chat-snippet-body"},this.renderBody(t)))))},o.render=function(){var e=this.props,t=e.appName,n=e.conversation.userParticipated,o=Object(w.d)(this.props.conversation);if(!o)return null;var r=o.author,i=o.body;return this.shouldRenderChatStyle()?this.renderChatStyle(r,i,t,n):this.renderPlainStyle(r,i,t,n)},n}(O.Component);y.defaultProps={stack:!1},y.propTypes={conversation:s.a.shape({id:s.a.any.isRequired,parts:s.a.arrayOf(s.a.shape({author:s.a.object.isRequired,body:s.a.array.isRequired})).isRequired,userParticipated:s.a.bool.isRequired}).isRequired,appName:s.a.string.isRequired,stack:s.a.bool.isRequired,onClick:s.a.func.isRequired};var k=n(0),j="cubic-bezier(0.165, 0.84, 0.44, 1)",E=Object(k.d)("0%{opacity:0;transform:translateY(20px);}30%{opacity:1;}100%{opacity:1;transform:translateY(0);}"),x=Object(k.c)("div",{target:"e1d2cwfh0"})("padding:0 ",5,"px;"),R={name:"1fcc2f6",styles:"box-shadow:0 2px 8px 0 rgba(35,47,53,0.2);"},_=Object(k.c)("div",{target:"e1d2cwfh1"})("position:relative;height:",Object(k.e)("height"),"px;width:",340,"px;max-width:100%;padding-bottom:",10,"px;",l.a.className,"{height:",120,"px;",function(e){return e.theme.isMobile&&R},";}",m.a.className,"{animation:",E," 0.25s ",j,";}"),T=Object(k.c)("div",{target:"e1d2cwfh2"})("box-sizing:border-box;position:absolute;bottom:",10,"px;width:100%;backface-visibility:hidden;transform-origin:top center;transition:transform ",300,"ms ",j,";",function(e){return 2===e.position&&Object(k.b)("transform:translate3d(0,-",7,"px,0) scale(0.95);")}," ",function(e){return 3===e.position&&Object(k.b)("transform:translate3d(0,-",14,"px,0) scale(0.9);")}," ",function(e){var t=e.position,n=e.expanded;return 2===t&&n&&Object(k.b)("transition-delay:150ms;transform:translate3d(0,-",130,"px,0) scale(1);")}," ",function(e){var t=e.position,n=e.expanded;return 3===t&&n&&Object(k.b)("transition-delay:150ms;transform:translate3d(0,-",260,"px,0) scale(1);")}),I=Object(k.c)("div",{target:"e1d2cwfh3"})("padding-top:",10,"px;:after{content:'';clear:both;display:table;}",m.b.className,"{transition:opacity ",200,"ms ",j,";",function(e){return e.expandAnimationInProgress&&Object(k.b)("transition-delay:",300,"ms;")},"}");function P(e){var t=e.conversation,n=e.appName,o=e.position,r=e.expanded,i=e.handleOnClick,a=e.stack;return C.a.createElement(T,{position:o,expanded:r,key:t.id},C.a.createElement(y,{conversation:t,appName:n,onClick:i,stack:a}))}var N,B,M={name:"1v8x7dw",styles:"overflow:auto;"},A=Object(k.c)("div",{target:"e106pw6f0"})("max-height:",Object(k.e)("maxHeight"),"px;",function(e){return e.scroll&&M}),F=n(16),H=function(e){return e.offsetTop+e.clientHeight};function V(e){var t=e.frameNode,n=e.children,o=e.keepScrollToBottom,r=e.scrollToBottomWithAnimation,i=H(t),a=Object(O.useRef)(null),s=Object(O.useState)(!1),c=s[0],l=s[1];return Object(O.useEffect)(function(){return o&&a.current&&function e(){Object(F.z)(a.current),N=window.parent.requestAnimationFrame(e)}(),function(){return window.parent.cancelAnimationFrame(N)}},[o]),Object(O.useEffect)(function(){r&&a.current&&Object(F.e)(a.current)},[r]),Object(O.useEffect)(function(){return B=setTimeout(function(){return l(!0)},300),function(){clearTimeout(B),window.parent.cancelAnimationFrame(N)}},[]),C.a.createElement(A,{maxHeight:i,ref:a,scroll:c},n)}var q,W,D,z=n(14);function L(e){var t=e.conversations,r=e.appName,i=e.handleOnClick,n=e.children,o=e.frameNode,a=t.filter(function(e){return!!Object(w.d)(e)}),s=130*a.length,c=130+7*(a.length-1),l=Object(z.g)(),p=Object(O.useState)(!1),u=p[0],d=p[1],h=Object(O.useState)(c),f=h[0],m=h[1],g=Object(O.useState)(!1),b=g[0],v=g[1],y=function(e){var t,n=a.map(function(e){return e.id});d(e),t=n,Object(S.e)("hovered","message","in_app","from_grouped_message",{conversation_ids:t.join(",")}),e?(clearTimeout(D),v(!0),q=setTimeout(function(){return m(s)},1),W=setTimeout(function(){return v(!1)},300)):D=setTimeout(function(){return m(c)},300)};return Object(O.useEffect)(function(){return function(){clearTimeout(q),clearTimeout(W),clearTimeout(D)}},[]),C.a.createElement(V,{frameNode:o,keepScrollToBottom:b,scrollToBottomWithAnimation:!u},C.a.createElement(x,{onMouseEnter:function(){return!l&&y(!0)},onMouseLeave:function(){return!l&&y(!1)},onFocus:function(){return!l&&y(!0)},"aria-expanded":u},C.a.createElement(I,{expandAnimationInProgress:b},n),C.a.createElement(_,{height:f},a.map(function(e,t){return C.a.createElement(P,{key:t,conversation:e,appName:r,position:(n=a.length,o=t,n-o),expanded:u,handleOnClick:i,stack:1<a.length});var n,o}))))}var U=n(19),G=n(828),Y=n(432),X=n(439);var K=function(s){var e,t;function n(){for(var r,e,t,n,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return r=s.call.apply(s,[this].concat(i))||this,e=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r),n=function(){var e=r.props,t=e.onNotificationDismiss,n=e.conversations.map(function(e){return e.id});r.addDismissMetrics(n),t(n);var o=Object(X.a)();o&&o.focus()},(t="handleDismiss")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,r}t=s,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.componentDidMount=function(){var e=this.props.onDisplayNotifications,t=this.getSortedConversations();this.focusTrap=new Y.a({document:this.props.frameWindow.document}),e(t)},o.componentWillUnmount=function(){this.focusTrap&&this.focusTrap.restore()},o.addDismissMetrics=function(e){e.forEach(function(e){Object(S.e)("closed","message","in_app","from_snippet",{conversation_id:e})})},o.getSortedConversations=function(){return this.props.conversations.slice(-3).sort(function(e,t){return e.lastPartCreatedAt>t.lastPartCreatedAt})},o.renderDismissButton=function(){var e=1===this.props.conversations.length?Object(U.c)("clear"):Object(U.c)("clear_all");return C.a.createElement(m.b,{onClick:this.handleDismiss,visibleDismissButton:Object(z.g)()},e,C.a.createElement(m.c,null))},o.renderConversationsGrouped=function(){var e=this.props,t=e.appName,n=e.onNotificationClick,o=e.frameNode,r=this.getSortedConversations();return C.a.createElement(L,{conversations:r,appName:t,handleOnClick:n,frameNode:o},0<r.length?this.renderDismissButton():null)},o.render=function(){var e=this.props.frameWindow;return C.a.createElement(m.d,{className:"intercom-notifications"},this.renderConversationsGrouped(),C.a.createElement(G.a,{appWindow:e}))},n}(O.Component);K.propTypes={appName:s.a.string.isRequired,frameNode:s.a.any.isRequired,frameWindow:s.a.any.isRequired,conversations:s.a.array.isRequired,onNotificationClick:s.a.func.isRequired,onNotificationDismiss:s.a.func.isRequired,onDisplayNotifications:s.a.func.isRequired};var J=n(26),Q=n(44),$=n(256),Z=n(278),ee=n(208),te=Object(r.connect)(function(e){return{appName:e.app.name,conversations:Object(ee.a)(e)}},function(i){return{onNotificationClick:function(e){var t=e.id,n=e.parts,o=n[n.length-1],r=o.messageType;-1<[void 0,"chat","link","notificationChannels","video"].indexOf(r)?(i(Object(Q.g)(t)),i(Object(J.l)(a.a,t))):i(Object($.b)(t,o.id))},onNotificationDismiss:function(e){i(Object(Z.b)(a.a,e))},onDisplayNotifications:function(e){e.forEach(function(e){var t=e.id,n=e.parts,o=n[n.length-1];i(Object($.c)(t,o.id))})}}})(K),ne=n(275),oe=n(9),re=Object(k.c)(ne.a,{target:"e1gfsz3r0"})("position:fixed;z-index:",Object(oe.j)(),";",function(e){var t=e.theme;return Object(k.b)("bottom:",Object(oe.i)({theme:t})-10,"px;right:",t.horizontalPadding-5,"px;")}," ",function(e){var t=e.width,n=e.height;return Object(k.b)("width:",t+10,"px;height:",n+5,"px;")}," ",function(e){var t=e.theme;return t.isLeftAlignment&&Object(k.b)("left:",t.horizontalPadding-5,"px;right:auto;")});function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",function(){return se});var se=function(r){var e,t;function n(){for(var o,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ae(ie(o=r.call.apply(r,[this].concat(t))||this),"state",{width:0,height:0}),ae(ie(o),"handleMeasurementChange",function(e){var t=e.width,n=e.height;o.setState({width:t,height:n})}),o}return t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,n.prototype.render=function(){var n=this;return C.a.createElement(re,{frameName:"intercom-notifications-frame",title:"Intercom live chat "+Object(U.c)("message"),width:this.state.width,height:this.state.height,shouldLoadStylesheet:!0},function(e,t){return C.a.createElement(o.a,{onChange:n.handleMeasurementChange},C.a.createElement(te,{frameWindow:e,frameNode:t}))})},n}(O.Component)},1147:function(e,t,n){"use strict";n.r(t);var o=n(28),r=n(7),i=n.n(r),a=n(1),s=n.n(a),c=n(81),l=n(1046);var p=function(e){var t,n;function o(){return e.apply(this,arguments)||this}n=e,(t=o).prototype=Object.create(n.prototype),(t.prototype.constructor=t).__proto__=n;var r=o.prototype;return r.componentDidMount=function(){var e=this.props,t=e.isFetching,n=e.isFetched,o=e.onFetch;t||n||o()},r.render=function(){var e=this.props;return s.a.createElement(c.TransitionGroup,null,e.isFetched?s.a.createElement(c.CSSTransition,{classNames:"intercom-message",timeout:{enter:200,exit:200}},s.a.createElement(l.a,e)):null)},o}(a.Component);p.propTypes={isFetching:i.a.bool.isRequired,isFetched:i.a.bool.isRequired,onFetch:i.a.func.isRequired};var u=n(15),d=n(26),h=n(279),f=n(24);n.d(t,"mapStateToProps",function(){return m}),n.d(t,"mapDispatchToProps",function(){return g}),n.d(t,"mergeProps",function(){return b});var m=function(e){var t=Object(h.a)(e)[0];return{isFetching:t.isFetching,isFetched:!Object(f.m)(t),conversation:t}},g=function(t){return{onFetch:function(e){t(Object(d.l)(u.a,e))}}},b=function(e,t,n){return Object.assign({},e,t,n,{onFetch:function(){t.onFetch(e.conversation.id)}})};t.default=Object(o.connect)(m,g,b)(p)},1148:function(e,t,n){"use strict";n.r(t);var o=n(28),r=n(1064),i=n(1046),l=n(60),p=n(14),a=n(15),s=n(44),c=n(26),u=n(816),d=n(939);n.d(t,"mapStateToProps",function(){return h});var h=function(e){var t=e.user.isPresent,n=e.app,o=n.name,r=n.userConversationAttachmentsEnabled,i=n.userConversationGifsEnabled,a=Object(d.a)(e),s=a[0],c=p.a.isMobileBrowser();return{appName:o,conversation:s,part:a[0].parts[0],userIsPresent:t,isMobile:c,showUploadButton:r,showGifButton:i,shouldShowUpfrontEmailComposer:Object(l.h)(e),isUpfrontEmailComposerShowing:e.app.upfrontEmailCollection.upfrontEmailCollectorShowing}};t.default=Object(o.connect)(h,function(n){return{onOpen:function(e,t){n({type:"OPEN_POINTER_MESSAGE",conversationId:e,partId:t})},onClose:function(e){n({type:"CLOSE_POINTER_MESSAGE"}),n(Object(u.a)(e))},onConversationRead:function(e){n(Object(c.n)(a.a,e))},onComposerOrFormInputClick:function(e){n({type:"CLOSE_POINTER_MESSAGE"}),n(Object(u.a)(e)),n(Object(s.g)(e)),n(Object(c.l)(a.a,e))},onReactionSelect:function(e,t){n(Object(c.k)(a.a,e,t,!1))}}},i.b)(r.a)}}]);